import{s as fe,a as w,e as Q,b as Y,c as $,h as _e,d as C,f as u,g as ie,i as b,j as _,k as V,l as ne,m as me,o as pe,n as de,p as be,q as x,t as ye,r as ke,u as he}from"../chunks/scheduler.C9EcQ0XW.js";import{S as ve,i as ge,c as K,a as U,m as j,t as v,b as O,d as J,e as B,g as W}from"../chunks/index.BaFYQsWh.js";import{s as we,Q as Z,p as $e,a as ae,r as oe,C as Ee}from"../chunks/VennDiagram.svelte_svelte_type_style_lang.DLV2xppN.js";import{w as Re}from"../chunks/entry.DMV2mXbd.js";import{h as X}from"../chunks/button.C7gGWbRa.js";import{D as De,a as Te,Q as ee}from"../chunks/QueryViewer.RxxmNZ1v.js";import{p as Fe}from"../chunks/stores.CgLPkCfT.js";import{B as se}from"../chunks/BarChart.D-RUE70_.js";import{e as Oe,p as qe}from"../chunks/profile.COOguMbr.js";function Ie(c){let r,n=f.title+"",e;return{c(){r=Q("h1"),e=ye(n),this.h()},l(a){r=C(a,"H1",{class:!0});var o=ke(r);e=he(o,n),o.forEach(u),this.h()},h(){b(r,"class","title")},m(a,o){_(a,r,o),V(r,e)},p:x,d(a){a&&u(r)}}}function Me(c){return{c(){this.h()},l(r){this.h()},h(){document.title="Evidence"},m:x,p:x,d:x}}function Qe(c){let r,n,e,a,o;return document.title=r=f.title,{c(){n=w(),e=Q("meta"),a=w(),o=Q("meta"),this.h()},l(i){n=$(i),e=C(i,"META",{property:!0,content:!0}),a=$(i),o=C(i,"META",{name:!0,content:!0}),this.h()},h(){var i,l;b(e,"property","og:title"),b(e,"content",((i=f.og)==null?void 0:i.title)??f.title),b(o,"name","twitter:title"),b(o,"content",((l=f.og)==null?void 0:l.title)??f.title)},m(i,l){_(i,n,l),_(i,e,l),_(i,a,l),_(i,o,l)},p(i,l){l&0&&r!==(r=f.title)&&(document.title=r)},d(i){i&&(u(n),u(e),u(a),u(o))}}}function Ce(c){var o,i;let r,n,e=(f.description||((o=f.og)==null?void 0:o.description))&&He(),a=((i=f.og)==null?void 0:i.image)&&Se();return{c(){e&&e.c(),r=w(),a&&a.c(),n=Y()},l(l){e&&e.l(l),r=$(l),a&&a.l(l),n=Y()},m(l,k){e&&e.m(l,k),_(l,r,k),a&&a.m(l,k),_(l,n,k)},p(l,k){var y,H;(f.description||(y=f.og)!=null&&y.description)&&e.p(l,k),(H=f.og)!=null&&H.image&&a.p(l,k)},d(l){l&&(u(r),u(n)),e&&e.d(l),a&&a.d(l)}}}function He(c){let r,n,e,a,o;return{c(){r=Q("meta"),n=w(),e=Q("meta"),a=w(),o=Q("meta"),this.h()},l(i){r=C(i,"META",{name:!0,content:!0}),n=$(i),e=C(i,"META",{property:!0,content:!0}),a=$(i),o=C(i,"META",{name:!0,content:!0}),this.h()},h(){var i,l,k;b(r,"name","description"),b(r,"content",f.description??((i=f.og)==null?void 0:i.description)),b(e,"property","og:description"),b(e,"content",((l=f.og)==null?void 0:l.description)??f.description),b(o,"name","twitter:description"),b(o,"content",((k=f.og)==null?void 0:k.description)??f.description)},m(i,l){_(i,r,l),_(i,n,l),_(i,e,l),_(i,a,l),_(i,o,l)},p:x,d(i){i&&(u(r),u(n),u(e),u(a),u(o))}}}function Se(c){let r,n,e;return{c(){r=Q("meta"),n=w(),e=Q("meta"),this.h()},l(a){r=C(a,"META",{property:!0,content:!0}),n=$(a),e=C(a,"META",{name:!0,content:!0}),this.h()},h(){var a,o;b(r,"property","og:image"),b(r,"content",ae((a=f.og)==null?void 0:a.image)),b(e,"name","twitter:image"),b(e,"content",ae((o=f.og)==null?void 0:o.image))},m(a,o){_(a,r,o),_(a,n,o),_(a,e,o)},p:x,d(a){a&&(u(r),u(n),u(e))}}}function Ae(c){let r,n;return r=new Te({props:{value:"%",valueLabel:"All Institutions"}}),{c(){K(r.$$.fragment)},l(e){U(r.$$.fragment,e)},m(e,a){j(r,e,a),n=!0},p:x,i(e){n||(v(r.$$.fragment,e),n=!0)},o(e){O(r.$$.fragment,e),n=!1},d(e){B(r,e)}}}function le(c){let r,n;return r=new ee({props:{queryID:"institution",queryResult:c[0]}}),{c(){K(r.$$.fragment)},l(e){U(r.$$.fragment,e)},m(e,a){j(r,e,a),n=!0},p(e,a){const o={};a&1&&(o.queryResult=e[0]),r.$set(o)},i(e){n||(v(r.$$.fragment,e),n=!0)},o(e){O(r.$$.fragment,e),n=!1},d(e){B(r,e)}}}function ce(c){let r,n;return r=new ee({props:{queryID:"articles_by_ford",queryResult:c[1]}}),{c(){K(r.$$.fragment)},l(e){U(r.$$.fragment,e)},m(e,a){j(r,e,a),n=!0},p(e,a){const o={};a&2&&(o.queryResult=e[1]),r.$set(o)},i(e){n||(v(r.$$.fragment,e),n=!0)},o(e){O(r.$$.fragment,e),n=!1},d(e){B(r,e)}}}function ue(c){let r,n;return r=new ee({props:{queryID:"articles_authors",queryResult:c[2]}}),{c(){K(r.$$.fragment)},l(e){U(r.$$.fragment,e)},m(e,a){j(r,e,a),n=!0},p(e,a){const o={};a&4&&(o.queryResult=e[2]),r.$set(o)},i(e){n||(v(r.$$.fragment,e),n=!0)},o(e){O(r.$$.fragment,e),n=!1},d(e){B(r,e)}}}function Le(c){let r,n,e,a,o,i,l='<a href="#počet-článků-dle-oboru-ford">Počet článků dle oboru FORD</a>',k,y,H,D,q,h,S='<a href="#průměrný-počet-autorů-na-článek-dle-oboru-ford">Průměrný počet autorů na článek dle oboru FORD</a>',A,I,L,E,R,M,N,T=typeof f<"u"&&f.title&&f.hide_title!==!0&&Ie();function G(t,s){return typeof f<"u"&&f.title?Qe:Me}let F=G()(c),g=typeof f=="object"&&Ce();y=new De({props:{title:"Instituce:",data:c[0],name:"institution_picker",value:"name",$$slots:{default:[Ae]},$$scope:{ctx:c}}}),D=new se({props:{data:c[1],title:"Počet článků dle oboru FORD a ranking",x:"f_name",y:"ranking_cnt",series:"ranking",seriesOrder:["decil","Q1","Q2","Q3","Q4"],swapXY:"true"}}),I=new se({props:{data:c[2],title:"Průměrný počet autorů na článek",x:"Obor FORD",y:"prumerny pocet autoru",swapXY:"true"}});let m=c[0]&&le(c),p=c[1]&&ce(c),d=c[2]&&ue(c);return{c(){T&&T.c(),r=w(),F.c(),n=Q("meta"),e=Q("meta"),g&&g.c(),a=Y(),o=w(),i=Q("h2"),i.innerHTML=l,k=w(),K(y.$$.fragment),H=w(),K(D.$$.fragment),q=w(),h=Q("h2"),h.innerHTML=S,A=w(),K(I.$$.fragment),L=w(),m&&m.c(),E=w(),p&&p.c(),R=w(),d&&d.c(),M=Y(),this.h()},l(t){T&&T.l(t),r=$(t);const s=_e("svelte-6lktun",document.head);F.l(s),n=C(s,"META",{name:!0,content:!0}),e=C(s,"META",{name:!0,content:!0}),g&&g.l(s),a=Y(),s.forEach(u),o=$(t),i=C(t,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ie(i)!=="svelte-1qhb4gg"&&(i.innerHTML=l),k=$(t),U(y.$$.fragment,t),H=$(t),U(D.$$.fragment,t),q=$(t),h=C(t,"H2",{class:!0,id:!0,"data-svelte-h":!0}),ie(h)!=="svelte-fx62yt"&&(h.innerHTML=S),A=$(t),U(I.$$.fragment,t),L=$(t),m&&m.l(t),E=$(t),p&&p.l(t),R=$(t),d&&d.l(t),M=Y(),this.h()},h(){b(n,"name","twitter:card"),b(n,"content","summary"),b(e,"name","twitter:site"),b(e,"content","@evidence_dev"),b(i,"class","markdown"),b(i,"id","počet-článků-dle-oboru-ford"),b(h,"class","markdown"),b(h,"id","průměrný-počet-autorů-na-článek-dle-oboru-ford")},m(t,s){T&&T.m(t,s),_(t,r,s),F.m(document.head,null),V(document.head,n),V(document.head,e),g&&g.m(document.head,null),V(document.head,a),_(t,o,s),_(t,i,s),_(t,k,s),j(y,t,s),_(t,H,s),j(D,t,s),_(t,q,s),_(t,h,s),_(t,A,s),j(I,t,s),_(t,L,s),m&&m.m(t,s),_(t,E,s),p&&p.m(t,s),_(t,R,s),d&&d.m(t,s),_(t,M,s),N=!0},p(t,[s]){typeof f<"u"&&f.title&&f.hide_title!==!0&&T.p(t,s),F.p(t,s),typeof f=="object"&&g.p(t,s);const z={};s&1&&(z.data=t[0]),s&1073741824&&(z.$$scope={dirty:s,ctx:t}),y.$set(z);const te={};s&2&&(te.data=t[1]),D.$set(te);const re={};s&4&&(re.data=t[2]),I.$set(re),t[0]?m?(m.p(t,s),s&1&&v(m,1)):(m=le(t),m.c(),v(m,1),m.m(E.parentNode,E)):m&&(W(),O(m,1,1,()=>{m=null}),J()),t[1]?p?(p.p(t,s),s&2&&v(p,1)):(p=ce(t),p.c(),v(p,1),p.m(R.parentNode,R)):p&&(W(),O(p,1,1,()=>{p=null}),J()),t[2]?d?(d.p(t,s),s&4&&v(d,1)):(d=ue(t),d.c(),v(d,1),d.m(M.parentNode,M)):d&&(W(),O(d,1,1,()=>{d=null}),J())},i(t){N||(v(y.$$.fragment,t),v(D.$$.fragment,t),v(I.$$.fragment,t),v(m),v(p),v(d),N=!0)},o(t){O(y.$$.fragment,t),O(D.$$.fragment,t),O(I.$$.fragment,t),O(m),O(p),O(d),N=!1},d(t){t&&(u(r),u(o),u(i),u(k),u(H),u(q),u(h),u(A),u(L),u(E),u(R),u(M)),T&&T.d(t),F.d(t),u(n),u(e),g&&g.d(t),u(a),B(y,t),B(D,t),B(I,t),m&&m.d(t),p&&p.d(t),d&&d.d(t)}}}const f={title:"Obory FORD"};function Ne(c,r,n){let e,a;ne(c,Fe,t=>n(18,e=t)),ne(c,oe,t=>n(23,a=t));let{data:o}=r,{data:i={},customFormattingSettings:l,__db:k,inputs:y}=o;me(oe,a="3248cc1e787d4262dbec0b26ca427100",a);let H=Oe(Re(y));pe(H.subscribe(t=>n(5,y=t))),de(Ee,{getCustomFormats:()=>l.customFormats||[]});const D=(t,s)=>qe(k.query,t,{query_name:s});we(D),e.params,be(()=>!0);let q={initialData:void 0,initialError:void 0},h=X`select name
from rvvi.instution`,S=`select name
from rvvi.instution`;i.institution_data&&(i.institution_data instanceof Error?q.initialError=i.institution_data:q.initialData=i.institution_data,i.institution_columns&&(q.knownColumns=i.institution_columns));let A,I=!1;const L=Z.createReactive({callback:t=>{n(0,A=t)},execFn:D},{id:"institution",...q});L(S,{noResolve:h,...q}),globalThis[Symbol.for("institution")]={get value(){return A}};let E={initialData:void 0,initialError:void 0},R=X`select *,
    dense_rank() over (order by cnt desc) rnk
  from (
    select ac.fid, ac.f_name, ac.ranking, 
      sum(aid_count) ranking_cnt,
      max(sum(case when ac.ranking = 'Decil' or ac.ranking = 'Q1' then aid_count end)) over (partition by ac.fid) cnt,
    from rvvi.article_core ac
    where ac.i_name LIKE '${y.institution_picker.value}'
    group by ac.fid, ac.f_name, ac.ranking 
  ) t`,M=`select *,
    dense_rank() over (order by cnt desc) rnk
  from (
    select ac.fid, ac.f_name, ac.ranking, 
      sum(aid_count) ranking_cnt,
      max(sum(case when ac.ranking = 'Decil' or ac.ranking = 'Q1' then aid_count end)) over (partition by ac.fid) cnt,
    from rvvi.article_core ac
    where ac.i_name LIKE '${y.institution_picker.value}'
    group by ac.fid, ac.f_name, ac.ranking 
  ) t`;i.articles_by_ford_data&&(i.articles_by_ford_data instanceof Error?E.initialError=i.articles_by_ford_data:E.initialData=i.articles_by_ford_data,i.articles_by_ford_columns&&(E.knownColumns=i.articles_by_ford_columns));let N,T=!1;const G=Z.createReactive({callback:t=>{n(1,N=t)},execFn:D},{id:"articles_by_ford",...E});G(M,{noResolve:R,...E}),globalThis[Symbol.for("articles_by_ford")]={get value(){return N}};let P={initialData:void 0,initialError:void 0},F=X`select f_name "Obor FORD", aid_count "prumerny pocet autoru"
from rvvi.article_authors`,g=`select f_name "Obor FORD", aid_count "prumerny pocet autoru"
from rvvi.article_authors`;i.articles_authors_data&&(i.articles_authors_data instanceof Error?P.initialError=i.articles_authors_data:P.initialData=i.articles_authors_data,i.articles_authors_columns&&(P.knownColumns=i.articles_authors_columns));let m,p=!1;const d=Z.createReactive({callback:t=>{n(2,m=t)},execFn:D},{id:"articles_authors",...P});return d(g,{noResolve:F,...P}),globalThis[Symbol.for("articles_authors")]={get value(){return m}},c.$$set=t=>{"data"in t&&n(3,o=t.data)},c.$$.update=()=>{c.$$.dirty&8&&n(4,{data:i={},customFormattingSettings:l,__db:k}=o,i),c.$$.dirty&16&&$e.set(Object.keys(i).length>0),c.$$.dirty&262144&&e.params,c.$$.dirty&960&&(h||!I?h||(L(S,{noResolve:h,...q}),n(9,I=!0)):L(S,{noResolve:h})),c.$$.dirty&32&&n(11,R=X`select *,
    dense_rank() over (order by cnt desc) rnk
  from (
    select ac.fid, ac.f_name, ac.ranking, 
      sum(aid_count) ranking_cnt,
      max(sum(case when ac.ranking = 'Decil' or ac.ranking = 'Q1' then aid_count end)) over (partition by ac.fid) cnt,
    from rvvi.article_core ac
    where ac.i_name LIKE '${y.institution_picker.value}'
    group by ac.fid, ac.f_name, ac.ranking 
  ) t`),c.$$.dirty&32&&n(12,M=`select *,
    dense_rank() over (order by cnt desc) rnk
  from (
    select ac.fid, ac.f_name, ac.ranking, 
      sum(aid_count) ranking_cnt,
      max(sum(case when ac.ranking = 'Decil' or ac.ranking = 'Q1' then aid_count end)) over (partition by ac.fid) cnt,
    from rvvi.article_core ac
    where ac.i_name LIKE '${y.institution_picker.value}'
    group by ac.fid, ac.f_name, ac.ranking 
  ) t`),c.$$.dirty&15360&&(R||!T?R||(G(M,{noResolve:R,...E}),n(13,T=!0)):G(M,{noResolve:R})),c.$$.dirty&245760&&(F||!p?F||(d(g,{noResolve:F,...P}),n(17,p=!0)):d(g,{noResolve:F}))},n(7,h=X`select name
from rvvi.instution`),n(8,S=`select name
from rvvi.instution`),n(15,F=X`select f_name "Obor FORD", aid_count "prumerny pocet autoru"
from rvvi.article_authors`),n(16,g=`select f_name "Obor FORD", aid_count "prumerny pocet autoru"
from rvvi.article_authors`),[A,N,m,o,i,y,q,h,S,I,E,R,M,T,P,F,g,p,e]}class Ve extends ve{constructor(r){super(),ge(this,r,Ne,Le,fe,{data:3})}}export{Ve as component};
